program incdecref;
type
 ttest = class
  a,b: int32;
  s: string8;
  constructor create();
  destructor destroy();
  method incref() [incref];
  method decref() [decref];
 end;

constructor ttest.create();
begin
end;

destructor ttest.destroy();
begin
end;

method ttest.incref();
begin
 writeln('incref');
end;

method ttest.decref();
begin
 writeln('decref');
end;

var
 a: ttest;
begin
{$internaldebug on}
 a:= ttest.create();
 incref(a);
 decref(a);
{
 a:= ttest.create();
 a:= a;
 a.destroy();
}
end.