program ini2;
type
{$internaldebug on}
 ttest = class()[virtual]
  f1,f2: int32;
  constructor create();
  destructor destroy();
  method ini() [ini,virtual];
  method fini() [virtual];
  method dispose() [dispose];
 end;

 ttest1 = class(ttest) [virtual]
  f3: string16;
  method fini() [override,fini];
 end;

constructor ttest.create();
begin
end;

destructor ttest.destroy();
begin
end;

method ttest.ini();
begin
 writeln('ini ',sizeof(self^));
end;

method ttest.fini();
begin
 writeln('fini ',sizeof(self^));
end;

method ttest.dispose();
begin
end;

method ttest1.fini();
begin
 writeln('fini1');
 inherited fini;
end;

type
 cty = class of ttest;
var
 cc: cty;
 c2: ttest;
 v1: string8;
begin
{$internaldebug on}
 v1:= 'abc';
 c2:= ttest1.create();
 ttest1(c2).f3:= v1;
// finalize(c2^);
 c2.destroy();
end.