program incdecref;
type
{$internaldebug on}
 objty = object[nozeroinit]
  property s: string8 read gets write sets;
  private
   fstring: pointer;
  protected
   method gets(): string8;
   method sets(const avalue: string8);
   method ini() [ini];
   method fini() [fini];
   method incref() [incref];
   method decref() [decref];
 end;

method objty.gets(): string8;
begin
 result:= string8(fstring);
end;

method objty.sets(const avalue: string8);
begin
 string8(fstring):= avalue;
end;
var s1: string8;
method objty.ini();
begin
 initialize(string8(fstring));
s1:= s;
// writeln('ini ',s);
end;

method objty.fini();
begin
 finalize(string8(fstring));
 writeln('fini ',s);
end;

method objty.incref();
begin
 incref(string8(fstring);
 writeln('incref ',s);
end;

method objty.decref();
begin
 decref(string8(fstring));
 writeln('decref ',s);
end;

var
 obj1,obj2: objty;
begin
{$internaldebug on}
 obj1:= obj2;
end.